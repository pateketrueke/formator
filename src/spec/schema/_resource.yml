description: Shopping Cart example
model: Cart
refs:
  Cart:
    model: Cart
    plural: Carts
    singular: Cart
    references:
      primaryKeys:
      - prop: id
        type: integer
  items:
    through: CartItem
    model: Product
    plural: Products
    singular: Product
    references:
      primaryKeys:
      - prop: id
        type: integer
      foreignKeys:
      - prop: CartId
        type: integer
      - prop: ProductId
        type: integer
    hasManyItems: true
    requiredProps:
    - name
    - price
  Product:
    id: Product
    properties:
      id:
        "$ref": dataTypes#/definitions/primaryKey
      name:
        type: string
      price:
        type: number
        value: decimal
    required:
    - name
    - price
  CartItem:
    id: CartItem
    properties:
      qty:
        type: integer
  dataTypes:
    definitions:
      primaryKey:
        type: integer
        primaryKey: true
        autoIncrement: true
schema:
  id: Cart
  properties:
    id:
      type: integer
    items:
      type: array
      items:
        "$ref": Product
  required:
  - items
  type: object
uiSchema:
  ui:title: Shopping Cart
  ui:save: Save cart
  ui:new: Build a new cart
  id:
    ui:hidden: true
  items:
    ui:label: Products
    ui:empty: Your cart is empty
    ui:append: Find or add new product
    ui:headers: [Quantity, Product info.]
    ui:update: Update product
    ui:save: Add product
    ui:template: ["small", [ ["span", "Products bought: <@sum:*.qty> (preview: <@embed:*.Product.image>)"], ["span", { "style": "float:right" }, "Total: $<@sum:*.Product.price>"] ]]
    qty:
      ui:label: Quantity
      ui:focus: true
    Product:
      ui:template: "{name!N/A} ${price!0.00}"
      ui:label: Product's
      id:
        ui:hidden: true
      name:
        ui:label: name
      price:
        ui:label: price
attributes: {}
#isNew: true
action: index
actions:
  Cart:
    index:
      verb: GET
      path: /db/Cart
    new:
      verb: GET
      path: /db/Cart/new
    create:
      verb: PUT
      path: /db/Cart
    edit:
      verb: GET
      path: /db/Cart/:id/edit
    show:
      verb: GET
      path: /db/Cart/:id
    update:
      verb: PATCH
      path: /db/Cart/:id
    destroy:
      verb: DELETE
      path: /db/Cart/:id
  CartItem:
    index:
      verb: GET
      path: /db/CartItem
    new:
      verb: GET
      path: /db/CartItem/new
    create:
      verb: PUT
      path: /db/CartItem
    edit:
      verb: GET
      path: /db/CartItem/:id/edit
    show:
      verb: GET
      path: /db/CartItem/:id
    update:
      verb: PATCH
      path: /db/CartItem/:id
    destroy:
      verb: DELETE
      path: /db/CartItem/:id
  Product:
    index:
      verb: GET
      path: /db/Product
    new:
      verb: GET
      path: /db/Product/new
    create:
      verb: PUT
      path: /db/Product
    edit:
      verb: GET
      path: /db/Product/:id/edit
    show:
      verb: GET
      path: /db/Product/:id
    update:
      verb: PATCH
      path: /db/Product/:id
    destroy:
      verb: DELETE
      path: /db/Product/:id
